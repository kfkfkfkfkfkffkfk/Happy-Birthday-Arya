<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy 15th Birthday Arya ğŸ‚</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700;900&family=Bebas+Neue&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â• RESET â•â•â•â•â•â• */
*{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;}
body{
  font-family:'Orbitron',sans-serif;
  color:#fff;
  overflow-x:hidden;
  background:#04000d;
}

/* â•â•â•â•â•â• VIDEO BACKGROUND SYSTEM â•â•â•â•â•â• */
/* Three full-screen video sections stacked vertically */
.vid-section{
  position:relative;
  width:100%;
  height:100vh;
  overflow:hidden;
  display:flex;align-items:center;justify-content:center;
  background:#04000d;
}
.vid-section iframe{
  position:absolute;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  width:177.78vh;
  height:100vh;
  min-width:100%;
  min-height:56.25vw;
  border:none;
  pointer-events:none;
  /* start invisible â€” JS reveals after playback confirmed */
  opacity:0;
  transition:opacity 1.2s ease;
}
.vid-section.vid-loaded iframe{ opacity:1; }
.vid-overlay{
  position:absolute;inset:0;
  z-index:2;
  pointer-events:none;
}
/* Section 1: Girls - light purple/pink tint */
.vid-section:nth-child(1) .vid-overlay{
  background:linear-gradient(to bottom,rgba(4,0,13,.55) 0%,rgba(80,0,120,.25) 50%,rgba(4,0,13,.65) 100%);
}
/* Section 2: Soda Pop - teal/cyan tint */
.vid-section:nth-child(2) .vid-overlay{
  background:linear-gradient(to bottom,rgba(4,0,13,.6) 0%,rgba(0,40,60,.3) 50%,rgba(4,0,13,.7) 100%);
}
/* Section 3: Demon - red/dark tint */
.vid-section:nth-child(3) .vid-overlay{
  background:linear-gradient(to bottom,rgba(4,0,13,.65) 0%,rgba(80,0,0,.35) 50%,rgba(4,0,13,.75) 100%);
}



/* â•â•â•â•â•â• CONTENT OVERLAY ON EACH SECTION â•â•â•â•â•â• */
.section-content{
  position:relative;z-index:5;
  text-align:center;padding:2rem;
  pointer-events:none;
}

/* SECTION 1 â€” HERO */
.hero-badge{
  font-family:'Noto Serif KR',serif;
  font-size:.75rem;letter-spacing:.45em;
  color:#c77dff;text-shadow:0 0 20px #c77dff;
  margin-bottom:1rem;
  animation:flicker 5s infinite;
}
@keyframes flicker{0%,92%,96%,100%{opacity:1}94%{opacity:.2}95%{opacity:.8}}

.hero-title{
  font-family:'Bebas Neue',cursive;
  font-size:clamp(4.5rem,13vw,10rem);
  line-height:.88;
  background:linear-gradient(135deg,#ffd700 0%,#dc143c 35%,#ff0080 65%,#bf00ff 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  filter:drop-shadow(0 0 40px rgba(220,20,60,.5));
  animation:titleGlow 3s ease-in-out infinite;
}
@keyframes titleGlow{
  0%,100%{filter:drop-shadow(0 0 30px rgba(220,20,60,.5));}
  50%{filter:drop-shadow(0 0 70px rgba(255,0,128,.9)) drop-shadow(0 0 100px rgba(191,0,255,.4));}
}
.hero-name{
  font-family:'Noto Serif KR',serif;font-weight:900;
  font-size:clamp(3rem,8vw,6rem);
  color:#ff6bae;text-shadow:0 0 40px #ff6bae,0 0 80px rgba(255,107,174,.5);
  letter-spacing:.1em;margin:.4rem 0;
  animation:namePulse 2s ease-in-out infinite;
}
@keyframes namePulse{
  0%,100%{text-shadow:0 0 30px #ff6bae,0 0 60px rgba(255,107,174,.5);}
  50%{text-shadow:0 0 60px #ff6bae,0 0 120px rgba(255,107,174,.9);}
}
.hero-age{
  font-family:'Bebas Neue',cursive;
  font-size:clamp(5rem,15vw,12rem);
  color:#ffd700;text-shadow:0 0 50px #ffd700,0 0 100px rgba(255,215,0,.4);
  line-height:1;
  position:relative;display:inline-block;
}
.hero-age::before{content:'âœ¦';position:absolute;left:-55px;top:50%;transform:translateY(-50%);font-size:1.8rem;color:#dc143c;animation:starSpin 3s linear infinite;}
.hero-age::after{content:'âœ¦';position:absolute;right:-55px;top:50%;transform:translateY(-50%);font-size:1.8rem;color:#dc143c;animation:starSpin 3s linear infinite reverse;}
@keyframes starSpin{from{transform:translateY(-50%) rotate(0)}to{transform:translateY(-50%) rotate(360deg)}}
.hero-sub{font-size:.72rem;letter-spacing:.38em;color:rgba(255,255,255,.5);margin-top:1.2rem;}
.scroll-hint{
  position:absolute;bottom:120px;left:50%;transform:translateX(-50%);
  font-size:.65rem;letter-spacing:.3em;color:#00ffff;
  animation:bounce 2s ease-in-out infinite;
  z-index:10;
}
@keyframes bounce{0%,100%{transform:translateX(-50%) translateY(0);}50%{transform:translateX(-50%) translateY(10px);}}

/* SECTION 2 â€” SODA POP */
.section-label{
  font-family:'Bebas Neue',cursive;
  font-size:clamp(2rem,6vw,5rem);
  letter-spacing:.15em;
  background:linear-gradient(90deg,#00ffff,#ff6bae,#ffd700);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  margin-bottom:.5rem;
}
.section-sub{
  font-family:'Noto Serif KR',serif;
  font-size:.75rem;letter-spacing:.3em;color:rgba(255,255,255,.5);
}

/* SECTION 3 â€” DEMON */
.demon-label{color:#dc143c;text-shadow:0 0 30px #dc143c;}

/* â•â•â•â•â•â• MUSIC PLAYER â•â•â•â•â•â• */
.player-section{
  position:relative;z-index:10;
  background:linear-gradient(180deg,rgba(4,0,13,0) 0%,rgba(4,0,13,.95) 8%,#04000d 100%);
  padding:5rem 2rem 3rem;
  padding-bottom:3rem;
}
.player-wrap{max-width:860px;margin:0 auto;}
.sec-title{
  font-family:'Bebas Neue',cursive;font-size:2.8rem;text-align:center;
  background:linear-gradient(90deg,#00ffff,#bf00ff);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  letter-spacing:.1em;margin-bottom:.3rem;
}
.sec-sub{text-align:center;font-family:'Noto Serif KR',serif;color:rgba(255,255,255,.35);font-size:.7rem;letter-spacing:.3em;margin-bottom:2.5rem;}
.divider{width:100%;max-width:600px;margin:0 auto 2.5rem;height:1px;background:linear-gradient(to right,transparent,#dc143c,transparent);}

/* player card */
.player-card{
  background:linear-gradient(135deg,rgba(139,0,0,.12),rgba(10,0,5,.9));
  border:1px solid rgba(220,20,60,.3);border-radius:16px;
  padding:2rem;position:relative;overflow:hidden;
  box-shadow:0 0 60px rgba(139,0,0,.18);
}
.player-card::before{
  content:'';position:absolute;inset:-2px;border-radius:17px;
  background:linear-gradient(45deg,#dc143c,#bf00ff,#ff0080,#dc143c);
  z-index:-1;opacity:.45;
  animation:borderRot 4s linear infinite;
}
@keyframes borderRot{from{filter:hue-rotate(0)}to{filter:hue-rotate(360deg)}}

.now-playing{display:flex;align-items:center;gap:1.5rem;margin-bottom:1.5rem;}
.album-art{
  width:85px;height:85px;border-radius:12px;flex-shrink:0;
  background:linear-gradient(135deg,#8b0000,#bf00ff);
  display:flex;align-items:center;justify-content:center;
  font-size:2.8rem;box-shadow:0 0 30px rgba(139,0,0,.5);
  transition:transform .3s;
}
.album-art.spin{animation:albumSpin 8s linear infinite;}
@keyframes albumSpin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
.track-name{font-family:'Bebas Neue',cursive;font-size:1.7rem;letter-spacing:.05em;line-height:1;}
.track-artist{font-family:'Noto Serif KR',serif;font-size:.82rem;color:#ff6bae;text-shadow:0 0 10px #ff6bae;margin-top:.25rem;}
.track-theme{font-size:.62rem;color:rgba(255,255,255,.35);letter-spacing:.2em;margin-top:.2rem;text-transform:uppercase;}

.visualizer{display:flex;align-items:flex-end;gap:3px;height:45px;margin:.8rem 0;}
.bar{width:100%;background:linear-gradient(to top,#dc143c,#ff0080);border-radius:2px;transform-origin:bottom;}
.bar.on{animation:barDance var(--spd,.5s) ease-in-out infinite alternate;}
@keyframes barDance{from{transform:scaleY(.08)}to{transform:scaleY(1)}}

.progress-bar{width:100%;height:4px;background:rgba(255,255,255,.1);border-radius:2px;cursor:pointer;}
.progress-fill{height:100%;background:linear-gradient(to right,#dc143c,#ff0080);border-radius:2px;box-shadow:0 0 10px #ff0080;transition:width .1s linear;}
.time-display{display:flex;justify-content:space-between;font-size:.62rem;color:rgba(255,255,255,.35);margin-top:.35rem;}
.controls{display:flex;align-items:center;justify-content:center;gap:1.4rem;margin-top:1rem;}
.ctrl-btn{background:none;border:none;color:rgba(255,255,255,.55);font-size:1.35rem;cursor:pointer;padding:.4rem;transition:all .2s;}
.ctrl-btn:hover{color:#ff0080;transform:scale(1.2);}
.play-btn{
  width:58px;height:58px;border-radius:50%;
  background:linear-gradient(135deg,#dc143c,#ff0080);
  border:none;color:#fff;font-size:1.5rem;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 0 30px rgba(255,0,128,.5);transition:all .2s;
}
.play-btn:hover{transform:scale(1.1);box-shadow:0 0 55px rgba(255,0,128,.85);}
.volume-area{display:flex;align-items:center;gap:.7rem;margin-top:1rem;padding:0 .3rem;}
.vol-icon{font-size:.95rem;color:rgba(255,255,255,.4);}
.volume-slider{-webkit-appearance:none;flex:1;height:3px;background:rgba(255,255,255,.1);border-radius:2px;outline:none;}
.volume-slider::-webkit-slider-thumb{-webkit-appearance:none;width:13px;height:13px;border-radius:50%;background:#ff0080;cursor:pointer;box-shadow:0 0 10px #ff0080;}
.playlist{margin-top:1.8rem;display:flex;flex-direction:column;gap:.4rem;}
.pl-item{
  display:flex;align-items:center;gap:.9rem;padding:.7rem .9rem;
  border-radius:8px;cursor:pointer;transition:all .2s;border:1px solid transparent;
}
.pl-item:hover{background:rgba(220,20,60,.1);border-color:rgba(220,20,60,.3);}
.pl-item.active{background:rgba(220,20,60,.14);border-color:rgba(255,0,128,.4);}
.pl-num{font-family:'Bebas Neue',cursive;font-size:1.1rem;color:rgba(255,255,255,.28);width:2ch;}
.pl-item.active .pl-num{color:#ff0080;}
.pl-emoji{font-size:1.4rem;}
.pl-info{flex:1;}
.pl-name{font-family:'Bebas Neue',cursive;font-size:1.05rem;letter-spacing:.04em;color:rgba(255,255,255,.75);}
.pl-item.active .pl-name{color:#fff;}
.pl-artist{font-size:.67rem;color:rgba(255,255,255,.38);letter-spacing:.08em;margin-top:.12rem;}
.pl-dur{font-size:.7rem;color:rgba(255,255,255,.28);}
.note-about{font-size:.6rem;color:rgba(255,255,255,.2);text-align:center;margin-top:1.8rem;letter-spacing:.18em;}

/* â•â•â•â•â•â• BIRTHDAY NOTE â•â•â•â•â•â• */
.note-section{position:relative;z-index:10;padding:2rem 2rem 3rem;max-width:700px;margin:0 auto;}
.note-card{background:rgba(10,0,5,.82);border:1px solid rgba(255,215,0,.2);border-radius:16px;padding:2.5rem;text-align:center;}
.note-card::before{content:'âš”ï¸';font-size:3.5rem;display:block;margin-bottom:1rem;filter:drop-shadow(0 0 18px rgba(255,215,0,.5));animation:swordGlow 2s ease-in-out infinite;}
@keyframes swordGlow{0%,100%{filter:drop-shadow(0 0 10px rgba(255,215,0,.3));}50%{filter:drop-shadow(0 0 30px rgba(255,215,0,.85));}}
.note-text{font-family:'Noto Serif KR',serif;font-size:1.05rem;line-height:1.9;color:rgba(255,255,255,.85);font-style:italic;}
.note-text .hl{color:#ff6bae;font-style:normal;font-weight:700;text-shadow:0 0 10px #ff6bae;}
.note-text .gl{color:#ffd700;font-style:normal;font-weight:700;text-shadow:0 0 10px #ffd700;}
.signature{margin-top:1.8rem;font-family:'Bebas Neue',cursive;font-size:1.9rem;letter-spacing:.2em;background:linear-gradient(90deg,#ffd700,#dc143c);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}

/* â•â•â•â•â•â• FLOATING RUNES â•â•â•â•â•â• */
.rune{position:fixed;pointer-events:none;font-size:1.4rem;opacity:0;animation:floatRune var(--dur,8s) ease-in-out infinite var(--delay,0s);z-index:1;}
@keyframes floatRune{0%{opacity:0;transform:translateY(100vh) rotate(0)}20%{opacity:.55}80%{opacity:.55}100%{opacity:0;transform:translateY(-15vh) rotate(360deg)}}

/* â•â•â•â•â•â• PARTICLE CANVAS â•â•â•â•â•â• */
#particles{position:fixed;inset:0;pointer-events:none;z-index:999;}



footer{text-align:center;padding:2rem;position:relative;z-index:10;color:rgba(255,255,255,.18);font-size:.6rem;letter-spacing:.28em;}
</style>
</head>
<body>

<!-- â•â• PARTICLE CANVAS â•â• -->
<canvas id="particles"></canvas>

<!-- â•â• FLOATING RUNES â•â• -->
<div id="runeContainer"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     VIDEO SECTION 1 â€” GOLDEN (GIRLS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="vid-section" id="vs1">
  <iframe id="yt1"
    src="https://www.youtube.com/embed/yebNIHKAC4A?autoplay=1&mute=0&loop=1&playlist=yebNIHKAC4A&controls=0&showinfo=0&rel=0&modestbranding=1&enablejsapi=1&playsinline=1&start=0"
    allow="autoplay; encrypted-media" allowfullscreen></iframe>
  <div class="vid-overlay"></div>
  <div class="section-content">
    <p class="hero-badge">HUNTR/X Â· ì•…ë§ˆ ì‚¬ëƒ¥ê¾¼ Â· KPOP DEMON HUNTERS</p>
    <h1 class="hero-title">HAPPY<br>BIRTHDAY</h1>
    <p class="hero-name">ARYA</p>
    <div class="hero-age">15</div>
    <p class="hero-sub">THE CHOSEN ONE HAS LEVELED UP</p>
  </div>
  <p class="scroll-hint">â–¼ SCROLL â–¼</p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     VIDEO SECTION 2 â€” SODA POP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="vid-section" id="vs2">
  <iframe id="yt2"
    src="https://www.youtube.com/embed/y2prmubAic4?autoplay=0&mute=0&loop=1&playlist=y2prmubAic4&controls=0&showinfo=0&rel=0&modestbranding=1&enablejsapi=1&playsinline=1"
    allow="autoplay; encrypted-media" allowfullscreen></iframe>
  <div class="vid-overlay"></div>
  <div class="section-content">
    <p class="section-label">ğŸ¥¤ SODA POP ğŸ¥¤</p>
    <p class="section-sub">SAJA BOYS Â· THE VILLAIN EARWORM</p>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     VIDEO SECTION 3 â€” DEMON MODE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="vid-section" id="vs3">
  <iframe id="yt3"
    src="https://www.youtube.com/embed/2FS3JAPTKXs?autoplay=0&mute=0&loop=1&playlist=2FS3JAPTKXs&controls=0&showinfo=0&rel=0&modestbranding=1&enablejsapi=1&playsinline=1"
    allow="autoplay; encrypted-media" allowfullscreen></iframe>
  <div class="vid-overlay"></div>
  <div class="section-content">
    <p class="section-label demon-label">ğŸ˜ˆ SAJA BOYS ğŸ˜ˆ</p>
    <p class="section-sub">DEMON MODE â€” FINAL BOSS UNLOCKED</p>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MUSIC PLAYER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="player-section">
  <div class="player-wrap">
    <div class="divider"></div>
    <h2 class="sec-title">ğŸ¬ HUNTR/X PLAYLIST ğŸ¬</h2>
    <p class="sec-sub">KPop Demon Hunters Â· Official Netflix Soundtrack Â· 2025</p>
    <div class="player-card">
      <div class="now-playing">
        <div class="album-art" id="albumArt">ğŸ”¥</div>
        <div>
          <div class="track-name" id="trackName">â€”</div>
          <div class="track-artist" id="trackArtist">â€”</div>
          <div class="track-theme" id="trackTheme">â€”</div>
        </div>
      </div>
      <div class="visualizer" id="visualizer"></div>
      <div class="progress-bar" id="progressBar">
        <div class="progress-fill" id="progressFill" style="width:0%"></div>
      </div>
      <div class="time-display"><span id="timeElapsed">0:00</span><span id="timeDuration">0:00</span></div>
      <div class="controls">
        <button class="ctrl-btn" onclick="prevTrack()">â®</button>
        <button class="play-btn" id="playBtn" onclick="togglePlay()">â–¶</button>
        <button class="ctrl-btn" onclick="nextTrack()">â­</button>
      </div>
      <div class="volume-area">
        <span class="vol-icon">ğŸ”ˆ</span>
        <input type="range" class="volume-slider" id="volSlider" min="0" max="100" value="80" oninput="setVol(this.value)">
        <span class="vol-icon">ğŸ”Š</span>
      </div>
      <div class="playlist" id="playlist"></div>
      <p class="note-about">â–¶ Click play or a track to start Â· Audio streams via YouTube Â· Requires internet</p>
    </div>
    <!-- Hidden YouTube IFrame API player sits outside the card but inside the wrap -->
    <div id="yt-container" style="position:absolute;width:1px;height:1px;overflow:hidden;opacity:0;pointer-events:none;top:-9999px;left:-9999px;">
      <div id="yt-player"></div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     BIRTHDAY NOTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="note-section">
  <div class="note-card">
    <p class="note-text" style="font-family:'Comic Sans MS','Comic Sans',cursive;font-style:normal;font-size:1.1rem;line-height:2;text-align:left;">
      Happy Birthday, Arya! I hope you had an amazing birthday and can't wait to see you when you are fifteen! I am very proud of you and hope that you will be driving me here soon, unless Levi drives us all first! I hope that I can see you soon, and I hope I can make another amazing day for you when I see you next, just like the Saja Boys and HUNTR/X did! Happy birthday again Arya, and I hope you like my card and my games! You are the first birthday card I have coded, so make sure to tell me what you think. If my aunt had sent that Ejae video soon enough, I would have put that in the card, but sadly, she did not. See you soon!
      <br><br>
      <span style="font-size:1.2rem;">â€“Noah</span>
    </p>
  </div>
</section>

<footer>CRAFTED WITH ğŸ”¥ FOR ARYA'S 15TH Â· KPOP DEMON HUNTERS Â· GONNA BE GOLDEN</footer>


<!-- YouTube IFrame API -->
<script src="https://www.youtube.com/iframe_api"></script>
<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   KPOP DEMON HUNTERS Â· FULL SOUNDTRACK PLAYER
   Uses YouTube IFrame API â€” plays right here on the page,
   no redirects, no popups, auto-advances, loops forever.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

const TRACKS = [
  { name:"TAKEDOWN",              artist:"TWICE (Jeongyeon, Jihyo, Chaeyoung)",  theme:"TWICE Ã— HUNTR/X Â· LEAD SINGLE",         emoji:"âš¡", ytId:"RIiHgjF3MSM", dur:"3:09" },
  { name:"HOW IT'S DONE",         artist:"HUNTR/X (EJAE, Audrey Nuna, REI AMI)", theme:"HUNTR/X Â· OPENING ANTHEM",               emoji:"ğŸ”¥", ytId:"dJDHiQ3FPCQ", dur:"3:22" },
  { name:"SODA POP",              artist:"Saja Boys",                            theme:"SAJA BOYS Â· BUBBLEGUM BOP",               emoji:"ğŸ¥¤", ytId:"y2prmubAic4", dur:"2:58" },
  { name:"GOLDEN",                artist:"HUNTR/X (EJAE, Audrey Nuna, REI AMI)", theme:"HUNTR/X Â· GRAMMY WINNER Â· #1 UK",         emoji:"âœ¨", ytId:"yebNIHKAC4A", dur:"3:41" },
  { name:"STRATEGY",              artist:"TWICE",                                theme:"TWICE Â· COMEBACK TRACK",                  emoji:"ğŸ¯", ytId:"r0lI8zk4_o0", dur:"3:29" },
  { name:"TAKEDOWN (HUNTR/X)",    artist:"HUNTR/X (EJAE, Audrey Nuna, REI AMI)", theme:"HUNTR/X Â· IN-FILM VERSION",               emoji:"ğŸ—¡ï¸", ytId:"RIiHgjF3MSM", dur:"3:09" },
  { name:"YOUR IDOL",             artist:"Saja Boys",                            theme:"SAJA BOYS Â· VILLAIN SONG Â· #1 SPOTIFY",   emoji:"ğŸ˜ˆ", ytId:"2FS3JAPTKXs", dur:"3:15" },
  { name:"FREE",                  artist:"Rumi & Jinu (EJAE, Andrew Choi)",      theme:"RUMI Ã— JINU Â· EMOTIONAL DUET",            emoji:"ğŸ•Šï¸", ytId:"d7NObM5bZtY", dur:"3:52" },
  { name:"WHAT IT SOUNDS LIKE",   artist:"HUNTR/X (EJAE, Audrey Nuna, REI AMI)", theme:"HUNTR/X Â· CLIMACTIC FINALE",              emoji:"ğŸ¶", ytId:"8Q1GVoB4vDI", dur:"3:34" },
  { name:"LOVE MAYBE",            artist:"MeloMance",                            theme:"MELOMANCE Â· K-BALLAD",                    emoji:"ğŸ’™", ytId:"u9QHEHJ4Af4", dur:"3:48" },
  { name:"PATH",                  artist:"Jokers",                               theme:"JOKERS Â· PSYCH-POP INTERLUDE",            emoji:"ğŸŒ¿", ytId:"_FYSf3mC6Gk", dur:"3:03" },
  { name:"SCORE SUITE",           artist:"Marcelo Zarvos",                       theme:"ORIGINAL ORCHESTRAL SCORE",               emoji:"ğŸ»", ytId:"yebNIHKAC4A", dur:"8:12" },
];

/* â”€â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let current   = 0;
let isPlaying = false;
let ytPlayer  = null;
let ytReady   = false;
let pendingPlay = false;   // play was requested before API was ready
let progressTimer = null;

/* â”€â”€â”€ YouTube IFrame API callback â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function onYouTubeIframeAPIReady() {
  ytPlayer = new YT.Player('yt-player', {
    height: '1', width: '1',
    videoId: TRACKS[0].ytId,
    playerVars: {
      autoplay: 0,
      controls: 0,
      disablekb: 1,
      fs: 0,
      iv_load_policy: 3,
      modestbranding: 1,
      rel: 0,
      playsinline: 1,
      origin: window.location.origin || 'https://github.io'
    },
    events: {
      onReady: onPlayerReady,
      onStateChange: onPlayerStateChange
    }
  });
}

function onPlayerReady(e) {
  ytReady = true;
  setVol(document.getElementById('volSlider').value);
  if (pendingPlay) { pendingPlay = false; ytPlayer.playVideo(); }
}

function onPlayerStateChange(e) {
  // YT.PlayerState.ENDED = 0
  if (e.data === YT.PlayerState.ENDED) {
    current = (current + 1) % TRACKS.length;
    loadTrack(true);
  }
  if (e.data === YT.PlayerState.PLAYING) {
    isPlaying = true;
    document.getElementById('playBtn').textContent = 'â¸';
    document.getElementById('albumArt').classList.add('spin');
    updateVisualizer(true);
    startProgressTimer();
  }
  if (e.data === YT.PlayerState.PAUSED || e.data === YT.PlayerState.ENDED) {
    isPlaying = false;
    document.getElementById('playBtn').textContent = 'â–¶';
    document.getElementById('albumArt').classList.remove('spin');
    updateVisualizer(false);
    clearInterval(progressTimer);
  }
}

/* â”€â”€â”€ Progress bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function startProgressTimer() {
  clearInterval(progressTimer);
  progressTimer = setInterval(() => {
    if (!ytPlayer || !ytPlayer.getDuration) return;
    const dur = ytPlayer.getDuration() || 0;
    const cur = ytPlayer.getCurrentTime() || 0;
    if (dur > 0) {
      document.getElementById('progressFill').style.width = (cur / dur * 100) + '%';
      document.getElementById('timeElapsed').textContent = fmtTime(cur);
      document.getElementById('timeDuration').textContent = fmtTime(dur);
    }
  }, 500);
}

function fmtTime(s) {
  s = Math.floor(s);
  return Math.floor(s / 60) + ':' + String(s % 60).padStart(2, '0');
}

/* Click progress bar to seek */
document.getElementById('progressBar').addEventListener('click', function(e) {
  if (!ytPlayer || !ytReady) return;
  const pct = e.offsetX / this.offsetWidth;
  ytPlayer.seekTo(ytPlayer.getDuration() * pct, true);
});

/* â”€â”€â”€ Core controls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function loadTrack(autoPlay) {
  const t = TRACKS[current];
  document.getElementById('trackName').textContent   = t.name;
  document.getElementById('trackArtist').textContent = t.artist;
  document.getElementById('trackTheme').textContent  = t.theme;
  document.getElementById('albumArt').textContent    = t.emoji;
  document.getElementById('timeDuration').textContent = t.dur;
  document.getElementById('timeElapsed').textContent  = '0:00';
  document.getElementById('progressFill').style.width = '0%';
  buildPlaylist();
  updateVisualizer(false);

  if (ytReady && ytPlayer) {
    ytPlayer.loadVideoById(t.ytId);
    if (!autoPlay) { ytPlayer.stopVideo(); isPlaying = false; }
    // loadVideoById autoplays by default â€” pause if not autoplaying
    if (!autoPlay) setTimeout(() => ytPlayer.pauseVideo && ytPlayer.pauseVideo(), 300);
  }
}

function togglePlay() {
  if (!ytReady || !ytPlayer) { pendingPlay = true; return; }
  if (isPlaying) {
    ytPlayer.pauseVideo();
  } else {
    ytPlayer.playVideo();
  }
}

function nextTrack() {
  current = (current + 1) % TRACKS.length;
  loadTrack(isPlaying);
}

function prevTrack() {
  current = (current - 1 + TRACKS.length) % TRACKS.length;
  loadTrack(isPlaying);
}

function setVol(v) {
  if (ytPlayer && ytReady) ytPlayer.setVolume(parseInt(v));
}

/* â”€â”€â”€ Playlist UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function buildPlaylist() {
  const pl = document.getElementById('playlist');
  pl.innerHTML = '';
  TRACKS.forEach((t, i) => {
    const div = document.createElement('div');
    div.className = 'pl-item' + (i === current ? ' active' : '');
    div.innerHTML = `<span class="pl-num">${i + 1}</span>
      <span class="pl-emoji">${t.emoji}</span>
      <div class="pl-info">
        <div class="pl-name">${t.name}</div>
        <div class="pl-artist">${t.artist}</div>
      </div>
      <span class="pl-dur">${t.dur}</span>`;
    div.onclick = () => {
      current = i;
      loadTrack(true);
      // loadVideoById starts playing automatically; state change handles UI
    };
    pl.appendChild(div);
  });
}

/* â”€â”€â”€ Visualizer bars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function updateVisualizer(on) {
  const viz = document.getElementById('visualizer');
  viz.innerHTML = '';
  for (let i = 0; i < 22; i++) {
    const b = document.createElement('div');
    b.className = 'bar' + (on ? ' on' : '');
    b.style.cssText = `--spd:${(.25 + Math.random() * .55).toFixed(2)}s;animation-delay:${(Math.random() * .4).toFixed(2)}s;height:${6 + Math.random() * 39}px;`;
    viz.appendChild(b);
  }
}

/* â”€â”€â”€ Floating runes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function spawnRunes() {
  const container = document.getElementById('runeContainer');
  const runes = ['âš¡','âœ¨','ğŸ”¥','ğŸ’€','ğŸ—¡ï¸','âš”ï¸','ğŸŒ™','ğŸ’«','ğŸ˜ˆ','ğŸµ','ğŸ‘ï¸','ğŸŒ¸'];
  for (let i = 0; i < 14; i++) {
    const r = document.createElement('div');
    r.className = 'rune';
    r.textContent = runes[Math.floor(Math.random() * runes.length)];
    r.style.cssText = `left:${Math.random() * 100}%;--dur:${7 + Math.random() * 9}s;--delay:${Math.random() * 8}s;`;
    container.appendChild(r);
  }
}

/* â”€â”€â”€ Particles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function initParticles() {
  const c = document.getElementById('particles');
  const ctx = c.getContext('2d');
  c.width = innerWidth; c.height = innerHeight;
  window.addEventListener('resize', () => { c.width = innerWidth; c.height = innerHeight; });
  const pts = Array.from({ length: 60 }, () => ({
    x: Math.random() * c.width, y: Math.random() * c.height,
    vx: (Math.random() - .5) * .4, vy: (Math.random() - .5) * .4,
    r: Math.random() * 1.8 + .4,
    col: ['#dc143c','#ff0080','#bf00ff','#00ffff','#ffd700'][Math.floor(Math.random() * 5)]
  }));
  (function loop() {
    ctx.clearRect(0, 0, c.width, c.height);
    pts.forEach(p => {
      p.x += p.vx; p.y += p.vy;
      if (p.x < 0) p.x = c.width; if (p.x > c.width) p.x = 0;
      if (p.y < 0) p.y = c.height; if (p.y > c.height) p.y = 0;
      ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fillStyle = p.col; ctx.globalAlpha = .55; ctx.fill();
    });
    requestAnimationFrame(loop);
  })();
}

/* â”€â”€â”€ Background video fade-in â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function initBgVideos() {
  const sections = document.querySelectorAll('.vid-section');
  const obs = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // Small delay so the iframe has time to receive autoplay
        setTimeout(() => entry.target.classList.add('vid-loaded'), 800);
      }
    });
  }, { threshold: 0.15 });
  sections.forEach(s => obs.observe(s));
}

/* â”€â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
window.addEventListener('load', () => {
  loadTrack(false);
  spawnRunes();
  initParticles();
  initBgVideos();
});
</script>
</body>
</html>
